<!DOCTYPE html>
<html>

<head>
    <style>
    </style>
    <!-- external frameworks -->
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">

    <!-- standard flatbuffers js API -->
    <script src="flatbuffers.js"></script>
    <!-- generated by flatbuffers flatc-command, from messages.fbs -->
    <script src="messages_generated.js"></script>
    <!-- our websockets messaging framework -->
    <script src="messages.js"></script>

    <!-- control app -->
    <script src="control.js"></script>
    <script src="paper.js"></script>

    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>

    <script>


        function ping(msg) {
            m.builder.clear();
            m.builder.finish(
                event.Message.createMessage(
                    m.builder,
                    event.EventUnion.Echo,
                    event.Echo.createEcho(
                        m.builder,
                        123,
                        456,
                        m.builder.createString("payload")
                    )
                )
            );
            m.send();
        }



        window.addEventListener('load', (event) => {

            control.start();
            paper.start();

            //start websocket messaging:
            m.start(function () {
                //(re)-connected
                paper.join(document.location.search);


            });

        })


    </script>

</head>
<body>

<ons-page>

    <ons-toolbar >
        <div class='center' id="tools">
            <ons-toolbar-button onclick="control.onClickToolPointer(this)">
                <ons-icon icon='fa-hand-point-up' class="fas"></ons-icon>
            </ons-toolbar-button>

            <ons-toolbar-button onclick="control.onClickToolSelect(this)">
                <ons-icon icon='fa-mouse-pointer'></ons-icon>
            </ons-toolbar-button>

            <ons-toolbar-button onclick="control.onClickToolPolyline(this)">
                <ons-icon icon='fa-pen'></ons-icon>
            </ons-toolbar-button>

            <ons-toolbar-button onclick="control.onClickToolSquare(this)">
                <ons-icon icon='fa-square' class="far"></ons-icon>
            </ons-toolbar-button>

            <ons-toolbar-button onclick="control.onClickToolCircle(this)">
                <ons-icon icon='fa-circle' class="far"></ons-icon>
            </ons-toolbar-button>


            <ons-toolbar-button onclick="control.onClickToolEraser(this)">
                <ons-icon icon='fa-eraser'></ons-icon>
            </ons-toolbar-button>


            <ons-toolbar-button icon='undo'
                                onclick="control.onClickUndo(this)"></ons-toolbar-button>
            <ons-toolbar-button icon='redo'
                                onclick="control.onClickRedo(this)"></ons-toolbar-button>
            <ons-toolbar-button icon='history'
                                onclick="control.onClickHistory(this)"></ons-toolbar-button>
        </div>

    </ons-toolbar>



            <!-- Your page content here. -->
    <svg style=" width: 200%; height: 200%">

    </svg>


</ons-page>


</body>

</html>