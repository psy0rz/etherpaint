<!DOCTYPE HTML>
<html>
  <head>
    <style>
    </style>
    <script type="text/javascript">
      function send(object)
      {
         console.log("Sending ", object);
         ws.send(JSON.stringify(object));
      }

      function open( )
      {
         if ( "WebSocket" in window )
         {
            ws = new WebSocket( "ws://localhost:3000/ws" );

            ws.onopen = function( )
            {
               console.log("Connected");
               ws.send("rommel");
               send(1);
               send({});
               send({'event':1});
               send({'event':'testevent', 'geert':1});

            };

            ws.onmessage = function( evt )
            {
               console.log("Receive: ", evt.data)
            };

            ws.onclose = function( evt )
            {
               console.log("Closed ", evt.code);
               setTimeout(open,1000);
            };

            ws.onerror = function( evt )
            {
               console.log("error");
            };

         }
         else
         {
            alert( "WebSockets NOT supported by your Browser!" );
         }
      }

      open();
    </script>
  </head>
  <body>
  </body>
</html>